<!DOCTYPE html>
<html manifest="cache.manifest">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
    <title>Mapping Wikileaks' Cablegate</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />
    <link id="prettify-link" href="prettify.css" rel="stylesheet" disabled />
    <link href="html5rocks.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery-1.4.4.min.js" language="javascript"></script>
    <script type="text/javascript" src="html5rocks.js" language="javascript+protovis"></script>
  </head>
  <body>
    <div class="presentation">
      <div id="presentation-counter"></div>
      <div class="slides">
        <div class="slide">
          <section class="middle">
            <header><h2>Mapping Wikileaks' Cablegate topics using Python, MongoDB, Neo4j and Gephi</h2></header>
            <p>FOSDEM's data devroom, Brussels, Feb 5 2011</p>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Goals</h2>
            </header>
            <ul class="bulleted">
                <li><p>by analysing cables' full-text and not using meta-data as a structure</p></li>
                <cite><h2>We want to produce a mixed occurrence and co-occurrence network of topics and cables</h2></cite>
                <li><p>in order to visualize how the discussions within the cables are composed and relate to each other</p></li>

            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>How ?</h2>
            </header>
            <ul class="bulleted">
                <li><p>analyse the ~3300 cables with Python, and a set of productive libraries</p></li>
                <li><p>use MongoDB for document storage and Neo4j for network storage</p></li>
                <li><p>explore the network with Gephi</p></li>
            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Import cables to MongoDB</h2>
            </header>
            <ul class="bulleted">
                <li>Hopefully, Wikileak's archive follows a simple structure, making data hackers' job easy !</p></li>
                <li><p>BeautifulSoup : html made easy</p>
                    <ul class="bulleted">
                        <li>automatically decodes to unicode</li>
                        <li>quietly handles html's tree errors</li>
                        <li>traversing methods as Python methods and lists</li>
                        <li>SoupStrainer : tells the parser to target a specific part of the document</li>
                    </ul>
                </p></li>
                <li><p>NLTK : clean_html() and you're done</p>
                    <ul class="bulleted">
                        <li>but still an effort: to handle decoding manually</li>
                        <li>Python provides safe and built-in functions to manage that</li>
                    </ul>
                </p></li>
                <li><p>MongoDB : document storage</p>
                    <ul class="bulleted">
                        <li>transparently inserting and reading records as Python dictionaries</li>
                        <li>automatic types serializing/deserializing : unicode, nested lists and dict, datetime...</li>
                    </ul>
                </p></li>
            </ul>
            <footer>
              <p>
              <a href="https://github.com/anarchivist/cablegate">original project on github</a><br/>
              </p>
            </footer>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Extract topics (1) : stemming</h2>
            </header>
            <ul class="bulleted">
                <li><p>an easy way to de-duplicate topics</p></li>
                <li><p>Group topics by their radicals</p></li>
                <li><p>stemming: nltk.PorterStemmer</p></li>
                <code>
                >>> print PorterStemmer().stem("language")
                'languag'
                </code>
                <li><p>compute sha256 to use it as a database index</p></li>
            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Extract topics (2) : part of speech tags</h2>
            </header>
            <ul class="bulleted">
                <li><p>decompose text into tokens : nltk.sent_tokenize and nltk.TreebankWordTokenizer</p></li>
                <li><p>Part of speech tagging with nltk.tag
                    <pre>
>>> import nltk.tag
>>> nltk.tag.pos_tag(['Help','Wikileaks','keep','governments','open'])
[('Help', 'NNP'), ('Wikileaks', 'NNP'), ('keep', 'VB'),
('governments', 'NNS'), ('open', 'JJ')]
                    </pre>
                    <ul class="bulleted">
                        <li>Compose and save a quality tagger with <a href="https://github.com/japerk/nltk-trainer"><i>nltk-trainer</i></a>
                          <ul class="bulleted">
                            <li><pre>$ python train_tagger.py --sequential aubt  --default "?" conll2000</pre></p></li>
                            <li><p>The <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tag.sequential.SequentialBackoffTagger-class.html">nltk.tag.SequentialBackoffTagger chains many taggers together</a>
                              <ul>
                                <li><a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tag.sequential.AffixTagger-class.html">nltk.tag.AffixTagger</a> learns from prefix and suffix patterns</li>
                                <li><a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tag.sequential.UnigramTagger-class.html">nltk.tag.UnigramTagger</a> learns from each letter composing the word</li>
                                <li><a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tag.sequential.BigramTagger-class.html">nltk.tag.BigramTagger</a> also learns from the preceeding word's tag</li>
                                <li><a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tag.sequential.TrigramTagger-class.html">nltk.tag.TrigramTagger</a> also learns from the preceeding two words' tag</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                    </ul>
                </p></li>
            </ul>
            <footer>
              <p> more at :<br/>
              source code : <a href="https://github.com/japerk/nltk-trainer">https://github.com/japerk/nltk-trainer</a><br/>
              about performances : <a href="http://streamhacker.com/2010/04/12/pos-tag-nltk-brill-classifier/">http://streamhacker.com/2010/04/12/pos-tag-nltk-brill-classifier/</a>
              </p>
            </footer>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Choose relevant topics</h2>
            </header>
            <ul class="bulleted">
                <li><p>automatic selection of words: DIY filters and stopwords</p>
                    <ul class="bulleted">
                        <li>a POS tag regular expression filtering "useless" words
                        <pre>
^(
    (VB,|VBD,|VBG,|VBN,|CD.?,|JJ.?,|\?,){0,2}?
    (N.?,|\?,)+?
    (CD.,)?
)+?
(
    (PREP.?|DET.?,|IN.?,|CC.?,|\?,)
    (
        (VB,|VBD,|VBG,|VBN,|CD.?,|JJ.?,|\?,){0,2}?
        (N.?,|\?,)+?
    )+?
)*?$
                        </pre>
                        </li>
                    </ul>
                </li>
            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>from MongoDB to Neo4j</h2>
            </header>
            <ul class="bulleted">
                <li><p>Exporting the network from using Neo4j Python module : depends on JPype</p></li>
            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Explore the network</h2>
            </header>
            <ul class="bulleted">
                <li>Navigating in the network</li>
            </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
                <h2>To sum up, cablegate_semnet is:</h2>
            </header>
              <ul class="bulleted">
                  <li><p>1000 lines of code, and 5 external libraries</p></li>
                  <li><p>1 full week coding</p></li>
                  <li><p>1 process, some RAM, billions of find and insert to Neo4j and MongoDB</p></li>
                  <li><p>1 network of 3,371 + 24,081 nodes and 16,144,100 co-occurrences edges</p></li>
                  <li><p>1 talk, 1 FOSDEM, 1 big leak</p></li>
              </ul>
          </section>
        </div>
        <div class="slide">
          <section>
            <header>
              <h2>Thanks</h2>
            </header>
            <p>A special thank to <a href="http://wikileaks.ch/">Wikileaks</a>
            <ul class="bulleted">
                <li>any questions ?</li>
                <li><a href="https://github.com/elishowk/cablegate_semnet">fork me on github</a></li>
                <li><a href="http://gephi.org">get Gephi</a></li>
            <p>Learn more at:</p>
            </ul>
              <ul class="bulleted">
                  <li><a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a></li>
                  <li><a href="http://www.nltk.org">NTLK</a></li>
                  <li><a href="http://www.mongodb.org">MongoDB</a></li>
                  <li><a href="http://neo4j.org/">Neo4j</a></li>
                  <li><a href="http://components.neo4j.org/neo4j.py/t">neo4j python</a></li>
                  <li><a href="http://gephi.org/2010/gsoc-2010-mid-term-adding-support-for-neo4j-in-gephi/">Martin Škurl developer of the Neo4j Gephi plugin</a></li>
                  <li><a href="http://slides.html5rocks.com">html5rocks !</a></li>
              </ul>
          </section>
        </div>
      </div> <!-- slides -->
    </div> <!-- presentation -->
    <!--[if lt IE 9]>
    <script
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
        <script>CFInstall.check({ mode: "overlay" });</script>
    <![endif]-->

  </body>
</html>
